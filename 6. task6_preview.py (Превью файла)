from flask import Flask
import os

app = Flask(__name__)

@app.route("/preview/<int:size>/<path:rel_path>")
def preview(size, rel_path):
    abs_path = os.path.abspath(rel_path)
    try:
        with open(rel_path, "r", encoding="utf-8") as f:
            text = f.read(size)
    except Exception as e:
        return str(e)
    return f"<b>{abs_path}</b> {len(text)}<br>{text}"

if __name__ == "__main__":
    app.run(debug=True)
